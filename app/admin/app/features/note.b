this should handle all functional code ect not ssr ones